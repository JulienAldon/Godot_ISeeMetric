[gd_scene load_steps=14 format=3 uid="uid://b4qecf23eusp0"]

[ext_resource type="Script" path="res://scripts/player/PlayerController.gd" id="1_ux3el"]
[ext_resource type="Script" path="res://scripts/Rts/RtsUi.gd" id="2_1353d"]
[ext_resource type="Script" path="res://scripts/Ui/OutpostUI.gd" id="3_emg23"]
[ext_resource type="Script" path="res://scripts/rts/RtsController.gd" id="3_h1evf"]
[ext_resource type="PackedScene" uid="uid://ct5uvol3tm24r" path="res://scenes/Ui/ui_action.tscn" id="3_r2coq"]
[ext_resource type="PackedScene" uid="uid://b2x6sdog8fqmo" path="res://scenes/multiplayer/unit_spawner.tscn" id="4_0ljgb"]
[ext_resource type="Texture2D" uid="uid://bg1cvfm5gto25" path="res://assets/actions/prod_guardian.png" id="5_oh1hk"]
[ext_resource type="Script" path="res://scripts/rts/actions/Production.gd" id="7_lvkl1"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_enl1o"]
size = Vector2(35, 363.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nhp26"]
size = Vector2(658, 35)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nvc8a"]
size = Vector2(647, 35)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bcs06"]
size = Vector2(35, 367)

[sub_resource type="CircleShape2D" id="CircleShape2D_q66si"]
radius = 25.0

[node name="Player" type="Node2D" node_paths=PackedStringArray("outpost_actions", "current_controller", "gui")]
script = ExtResource("1_ux3el")
outpost_actions = [NodePath("OutpostActions/UnitProduction")]
current_controller = NodePath("RtsController")
gui = NodePath("RtsUI")
metadata/_edit_horizontal_guides_ = []

[node name="RtsUI" type="Control" parent="." node_paths=PackedStringArray("name_label", "level", "outpost_panel")]
z_index = 10
layout_mode = 3
anchors_preset = 0
offset_top = 832.0
offset_right = 1906.0
offset_bottom = 1074.0
mouse_filter = 1
script = ExtResource("2_1353d")
name_label = NodePath("Name")
level = NodePath("Level")
outpost_panel = NodePath("OutpostUI")

[node name="Name" type="Label" parent="RtsUI"]
layout_mode = 0
offset_left = 5.0
offset_top = -828.0
offset_right = 142.0
offset_bottom = -802.0
theme_override_font_sizes/font_size = 18
text = "aze"

[node name="Level" type="Label" parent="RtsUI"]
layout_mode = 0
offset_left = 612.0
offset_top = -828.0
offset_right = 640.0
offset_bottom = -805.0
text = "000"

[node name="OutpostUI" type="PanelContainer" parent="RtsUI" node_paths=PackedStringArray("income_label", "total_income_label", "controlled_by_label", "action_panel", "action_container", "action_queue_container", "player_actions")]
layout_mode = 0
offset_left = 391.0
offset_top = -789.0
offset_right = 594.0
offset_bottom = -528.0
script = ExtResource("3_emg23")
income_label = NodePath("MarginContainer/VBoxContainer/Informations/Income/Label")
total_income_label = NodePath("MarginContainer/VBoxContainer/Informations/TotalIncome/Label")
controlled_by_label = NodePath("MarginContainer/VBoxContainer/Informations/ControlledBy/Label")
action_panel = NodePath("MarginContainer/VBoxContainer/Actions")
action_container = NodePath("MarginContainer/VBoxContainer/Actions/GridContainer")
action_queue_container = NodePath("MarginContainer/VBoxContainer/Actions/ActionQueue")
player_actions = NodePath("../../OutpostActions")

[node name="MarginContainer" type="MarginContainer" parent="RtsUI/OutpostUI"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBoxContainer" type="VBoxContainer" parent="RtsUI/OutpostUI/MarginContainer"]
layout_mode = 2

[node name="Title" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
text = "Outpost name"

[node name="Informations" type="VBoxContainer" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="Title" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations"]
layout_mode = 2
theme_override_font_sizes/font_size = 10
text = "Informations"

[node name="Income" type="HBoxContainer" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations"]
layout_mode = 2

[node name="Title" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations/Income"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 8
text = "Income"

[node name="Label" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations/Income"]
layout_mode = 2
size_flags_horizontal = 10
theme_override_font_sizes/font_size = 8
text = "50 gold/s"

[node name="TotalIncome" type="HBoxContainer" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations"]
layout_mode = 2

[node name="Title" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations/TotalIncome"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 8
text = "Total Income
"

[node name="Label" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations/TotalIncome"]
layout_mode = 2
size_flags_horizontal = 10
theme_override_font_sizes/font_size = 8
text = "27000 gold
"

[node name="ControlledBy" type="HBoxContainer" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations"]
layout_mode = 2
size_flags_vertical = 10

[node name="Title" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations/ControlledBy"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 8
text = "Controlled by
"

[node name="Label" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Informations/ControlledBy"]
layout_mode = 2
size_flags_horizontal = 10
theme_override_font_sizes/font_size = 8
text = "Max Player Name  Size"

[node name="Actions" type="VBoxContainer" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="Title" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions"]
layout_mode = 2
theme_override_font_sizes/font_size = 10
text = "Actions"

[node name="GridContainer" type="GridContainer" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/h_separation = 0
theme_override_constants/v_separation = 0
columns = 4

[node name="UIAction" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" node_paths=PackedStringArray("action") instance=ExtResource("3_r2coq")]
layout_mode = 2
action = NodePath("../../../../../../../OutpostActions/UnitProduction")

[node name="UIAction2" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" instance=ExtResource("3_r2coq")]
visible = false
layout_mode = 2

[node name="UIAction3" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" instance=ExtResource("3_r2coq")]
visible = false
layout_mode = 2

[node name="UIAction4" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" instance=ExtResource("3_r2coq")]
visible = false
layout_mode = 2

[node name="UIAction5" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" instance=ExtResource("3_r2coq")]
visible = false
layout_mode = 2

[node name="UIAction6" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" instance=ExtResource("3_r2coq")]
visible = false
layout_mode = 2

[node name="UIAction7" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" instance=ExtResource("3_r2coq")]
visible = false
layout_mode = 2

[node name="UIAction8" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/GridContainer" instance=ExtResource("3_r2coq")]
visible = false
layout_mode = 2

[node name="Queue" type="Label" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions"]
layout_mode = 2
theme_override_font_sizes/font_size = 10
text = "Actions Queue"

[node name="ActionQueue" type="HBoxContainer" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions"]
layout_mode = 2
size_flags_vertical = 3

[node name="TextureRect" type="TextureRect" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/ActionQueue"]
visible = false
layout_mode = 2
expand_mode = 2

[node name="TextureRect2" type="TextureRect" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/ActionQueue"]
visible = false
layout_mode = 2
expand_mode = 2

[node name="TextureRect3" type="TextureRect" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/ActionQueue"]
visible = false
layout_mode = 2
expand_mode = 2

[node name="TextureRect4" type="TextureRect" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/ActionQueue"]
visible = false
layout_mode = 2
expand_mode = 2

[node name="TextureRect5" type="TextureRect" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/ActionQueue"]
visible = false
layout_mode = 2
expand_mode = 2

[node name="TextureRect6" type="TextureRect" parent="RtsUI/OutpostUI/MarginContainer/VBoxContainer/Actions/ActionQueue"]
visible = false
layout_mode = 2
expand_mode = 2

[node name="RtsController" type="Node2D" parent="." node_paths=PackedStringArray("units", "player", "camera")]
script = ExtResource("3_h1evf")
camera_margin = 40
camera_speed = 600
units = NodePath("../UnitSpawner")
char_scene = "res://scenes/Rts/Units/rts_character.tscn"
player = NodePath("..")
camera = NodePath("../Camera2D")

[node name="Left" type="Area2D" parent="RtsController"]
z_index = 11
collision_layer = 16
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="RtsController/Left"]
position = Vector2(12, 181)
shape = SubResource("RectangleShape2D_enl1o")
debug_color = Color(0.996078, 0.117647, 0.145098, 0.419608)

[node name="Up" type="Area2D" parent="RtsController"]
z_index = 11
collision_layer = 16
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="RtsController/Up"]
position = Vector2(318, 14)
shape = SubResource("RectangleShape2D_nhp26")
debug_color = Color(0.996078, 0.117647, 0.145098, 0.419608)

[node name="Down" type="Area2D" parent="RtsController"]
z_index = 11
collision_layer = 16
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="RtsController/Down"]
position = Vector2(323, 343)
shape = SubResource("RectangleShape2D_nvc8a")
debug_color = Color(0.996078, 0.117647, 0.145098, 0.419608)

[node name="Right" type="Area2D" parent="RtsController"]
z_index = 11
collision_layer = 16
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="RtsController/Right"]
position = Vector2(623, 182)
shape = SubResource("RectangleShape2D_bcs06")
debug_color = Color(0.996078, 0.117647, 0.145098, 0.419608)

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0

[node name="EntityDetection" type="Area2D" parent="."]
collision_layer = 2
collision_mask = 17

[node name="CollisionShape2D" type="CollisionShape2D" parent="EntityDetection"]
shape = SubResource("CircleShape2D_q66si")
debug_color = Color(0.791588, 0.419872, 0.227158, 0.42)

[node name="UnitSpawner" parent="." instance=ExtResource("4_0ljgb")]

[node name="OutpostActions" type="Node2D" parent="."]

[node name="UnitProduction" type="Node2D" parent="OutpostActions" node_paths=PackedStringArray("cooldown", "time")]
script = ExtResource("7_lvkl1")
unit_scene = "res://scenes/Rts/Units/rts_character.tscn"
icon = ExtResource("5_oh1hk")
cooldown = NodePath("Cooldown")
time = NodePath("Timer")

[node name="Timer" type="Timer" parent="OutpostActions/UnitProduction"]

[node name="Cooldown" type="Timer" parent="OutpostActions/UnitProduction"]
wait_time = 0.1

[connection signal="mouse_entered" from="RtsController/Left" to="RtsController" method="_on_left_mouse_entered"]
[connection signal="mouse_exited" from="RtsController/Left" to="RtsController" method="_on_left_mouse_exited"]
[connection signal="mouse_entered" from="RtsController/Up" to="RtsController" method="_on_up_mouse_entered"]
[connection signal="mouse_exited" from="RtsController/Up" to="RtsController" method="_on_up_mouse_exited"]
[connection signal="mouse_entered" from="RtsController/Down" to="RtsController" method="_on_down_mouse_entered"]
[connection signal="mouse_exited" from="RtsController/Down" to="RtsController" method="_on_down_mouse_exited"]
[connection signal="mouse_entered" from="RtsController/Right" to="RtsController" method="_on_right_mouse_entered"]
[connection signal="mouse_exited" from="RtsController/Right" to="RtsController" method="_on_right_mouse_exited"]
